<html><head>
<title>Window Position - Rei's Booth.</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<link rel=stylesheet href="style.css">
</head>

<body bgcolor="#ffffff" text="#000000" link="#0066cc" vlink="#6b8e23" alink="#ff4500"><center>

<table width=85% border=0 cellspacing=0 cellpadding=0><tr><td>
<table width=100% border=0 cellspacing=0 cellpadding=0><tr>
<td><font face="verdana,arial,helvetica" size=1 color="#666666">
	<div class="ss"><a class="this" href= "index__2.html" ><b>Design</b></a>:
	<a class="nav" href= "index.html" >IMM Programming Tutorial</a>: 9
	</div></font></td>
<td nowrap><div align="right">
	<a href= "imm7.html" ><img src="../../lib/i-prev.png"
	border=0 width=13 height=12 alt="[Previous]"></a>
	<a href= "imm9.html" ><img src="../../lib/i-next.png"
	border=0 width=13 height=12 alt="[Next]"></a>
	<a href= "index.html" ><img src="../../lib/i-up.png"
	border=0 width=13 height=13 alt="[Up]"></a>
	<a href= "index__1.html" ><img src="../../lib/i-home.png"
	border=0 width=13 height=13 alt="[Home]"></a>
	<a href="http://thunder.prohosting.com/~reis/cgi-bin/reisbooth.cgi"><img src="../../lib/i-bbs.png" border=0 width=13 height=13 alt="[BBS]"></a>
	</div></td>
</tr><tr>
<td colspan=2><img src="../../lib/trans.png" width=1 height=2></td>
</tr><tr>
<td colspan=2 bgcolor="#c0c0c0"><center><img src="../../lib/trans.png" width=1 height=2 alt="- - - - - - - - - - - - - - - - - - - -"></center></td>
</tr></table><br>

<table width=100% border=0 cellspacing=0 cellpadding=5 bgcolor="#eeeeee"><tr><td class="title">
<font face="arial,helvetica"><b>Window Position</b></font>
</td></tr></table><br>

<font face="arial,helvetica" size=2>

<p>An application can specify the position to display IME component windows, that is, &quot;<i>Status Window</i>&quot;, &quot;<i>Composition Window</i>&quot; and &quot;<i>Candidate Window</i>&quot;.</p>

<p>The <i>Status Window</i> is often called as (IME's) toolbar. It indicates current <a href= "imm4.html" >conversion status</a> and may provide some buttons to invoke the IME's function. The <i>Composition Window</i> is a window managed by the IME on which the <a href= "imm5.html" >composition string</a> is drawn. The <i>Candidate Window</i> is the similar one for the <a href= "imm7.html" >candidate list</a>.</p>

<table border=0 cellspacing=0 cellpadding=5 align="right"><tr>
<td align="center"><img src="img/candpos.png" width=200 height=160 alt="(candpos.png, 3KB)"></td>
</tr><tr>
<td align="center"><font face="verdana,arial,helvetica" size=1 color="#666666">
	<span class="ss" align="center">
	Candidate Window on Bookshelf J,<br>
	placed next to the index area.</span></font></td>
</tr></table>

<p>For example, an Edit Control will place the composition window at the caret position. If you are desining a window by yourself which accept character input, you may let the IME know where to draw the composition string.<br>
One more good example is the japanese edition of Microsoft/Shougakukan Bookshelf, which displays the candidate window beside the index area.</p>

<p>You can know where the status window is by using <b>ImmGetStatusWindowPos</b> and move it by <b>ImmSetStatusWindowPos</b>.</p>

<p>The position of the composition window can be set by <b>ImmSetCompositionWindow</b> API. If you need to know the current position of the composition window, use <b>ImmGetCompositionWindow</b>.</p>

<p>And to move the candidate window like Bookshelf J does, use <b>ImmSetCandidateWindow</b>. The current position of the candidate window can be retrieved by <b>ImmGetCandidateWindow</b>.</p>

<p class="sp">&nbsp;</p>

<blockquote><table border=0 cellspacing=0 cellpadding=2 bgcolor="#c0c0c0"><tr><td>
<table border=0 cellspacing=0 cellpadding=5 bgcolor="#f5f5f5"><tr><td><pre>
 HIMC hIMC;
 RECT rc;
 POINT pt;
 COMPOSITIONFORM CompForm;
 CANDIDATEFORM CandForm;

 if ((hIMC = ImmGetContext(hWnd)) != NULL) {
     /* move the status window at the left-bottom of the&nbsp;
        application window.
        pt.x and pt.y are in screen coordinates. */
     GetWindowRect(hWnd, &rc);
     pt.x = rc.left;
     pt.y = rc.bottom;
     ImmSetStatusWindowPos(hIMC, &pt);

     /* set the left-top corner of the composition window&nbsp;
        at (32, 32) in client coordinates. */
     CompForm.dwStyle = CFS_POINT;
     CompForm.ptCurrentPos.x = 32;
     CompForm.ptCurrentPos.y = 32;
     ImmSetCompositionWindow(hIMC, &CompForm);

     /* set the left-top corner of the candidate window&nbsp;
        at (80, 32) in client coordinates. */
     CandForm.dwIndex = 0;
     CandForm.dwStyle = CFS_CANDIDATEPOS;
     CandForm.ptCurrentPos.x = 80;
     CandForm.ptCurrentPos.y = 32;
     ImmSetCandidateWindow(hIMC, &CandForm);

     /* the input context should be released. */
     ImmReleaseContext(hWnd, hIMC);
 }
</pre></td></tr></table>
</td></tr></table></blockquote>

</font>
<p class="sp">&nbsp;</p>

<table width=100% border=0 cellspacing=0 cellpadding=0><tr>
<td colspan=2 bgcolor="#c0c0c0"><center><img src="../../lib/trans.png" width=1 height=2 alt="- - - - - - - - - - - - - - - - - - - -"></center></td>
</tr><tr>
<td colspan=2><img src="../../lib/trans.png" width=1 height=3 alt=""></td>
</tr><tr>
<td><font face="verdana,arial,helvetica" size=1 color="#666666">
	<div class="ss"><a class="this" href= "index__2.html" ><b>Design</b></a>:
	<a class="nav" href= "index.html" >IMM Programming Tutorial</a>: 9
	</div></font></td>
<td><div align="right">
	<a href= "imm7.html" ><img src="../../lib/i-prev.png" border=0
	width=13 height=12 alt="[Previous]"></a>
	<a href= "imm9.html" ><img src="../../lib/i-next.png" border=0
	width=13 height=12 alt="[Next]"></a>
	<a href= "index.html" ><img src="../../lib/i-up.png" border=0
	width=13 height=13 alt="[Up]"></a>
	<a href= "index__1.html" ><img src="../../lib/i-home.png"
	border=0 width=13 height=13 alt="[Home]"></a>
	<a href="http://thunder.prohosting.com/~reis/cgi-bin/reisbooth.cgi"><img src="../../lib/i-bbs.png" border=0 width=13 height=13 alt="[BBS]"></a>
	</div></td>
</tr></table>
</td></tr></table><p>

</center></body></html>
